<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>3D UI Cards with Three.js & CSS3DRenderer</title>
  <!-- Tailwind -->
  <script src="https://cdn.tailwindcss.com"></script>
  <!-- GSAP (module friendly) -->
  <script type="module" src="https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js"></script>
  <!-- Three.js ES module build -->
  <script type="module" src="https://cdn.jsdelivr.net/npm/three@0.150.1/build/three.module.js"></script>
  <!-- CSS3DRenderer ES module -->
  <script type="module" src="https://cdn.jsdelivr.net/npm/three@0.150.1/examples/jsm/renderers/CSS3DRenderer.js"></script>
  <style>
  html, body { margin: 0; height: 100%; overflow: hidden; }
  #container { width: 100%; height: 100%; }

  .card {
    min-width: 220px;
    min-height: 140px;
    background: white;
    box-shadow: 0 6px 32px rgba(0,0,0,0.15);
    border-radius: 18px;
    padding: 24px 28px 18px 28px;
    font-family: 'Inter', sans-serif;
    font-size: 1.1rem;
    color: #222;
    position: relative;
    transition: box-shadow 0.3s;
    margin: 0 8px;
  }
  .card h2 {
    font-size: 1.35rem;
    margin-bottom: 1.1rem;
    font-weight: 700;
    color: #1780e7;
    letter-spacing: 0.01em;
  }
  .pointer {
    position: absolute;
    background: #1780e7;
    color: white;
    padding: 4px 14px;
    border-radius: 12px;
    font-size: 1rem;
    font-weight: 600;
    box-shadow: 0 2px 12px rgba(23,128,231,0.08);
    white-space: nowrap;
  }
  .pointer--left {
    left: -72px;
    top: 40px;
    transform: rotate(-15deg);
  }
  </style>
</head>
<body class="bg-gray-50">
  <div id="container"></div>

  <!-- Your main script must be type="module" -->
  <script type="module">
    import * as THREE from 'https://cdn.jsdelivr.net/npm/three@0.150.1/build/three.module.js';
    import { CSS3DRenderer, CSS3DObject } from 'https://cdn.jsdelivr.net/npm/three@0.150.1/examples/jsm/renderers/CSS3DRenderer.js';
    import { gsap } from 'https://cdnjs.cloudflare.com/ajax/libs/gsap/3.12.2/gsap.min.js';

    // —————— Three.js + CSS3D Setup ——————
    const scene = new THREE.Scene();
    const camera = new THREE.PerspectiveCamera(50, innerWidth/innerHeight, 1, 2000);
    camera.position.set(0, 0, 600);

    const renderer = new CSS3DRenderer();
    renderer.setSize(innerWidth, innerHeight);
    document.getElementById('container').appendChild(renderer.domElement);

    // —————— Create a card helper ——————
    function makeCard({ title, items, pointerText, x, rotY }) {
      const el = document.createElement('div');
      el.className = 'card';
      let inner = `<h2>${title}</h2>`;
      items.forEach(i => inner += `<div class="mb-1">${i}</div>`);
      el.innerHTML = inner;

      // pointer tag
      if (pointerText) {
        const p = document.createElement('div');
        p.className = 'pointer pointer--left';
        p.style.top = '45px';
        p.style.left = '-60px';
        p.textContent = pointerText;
        el.appendChild(p);
      }

      const obj = new CSS3DObject(el);
      obj.position.set(x, 0, 0);
      obj.rotation.y = rotY;
      scene.add(obj);
      return { el, obj };
    }

    // —————— Add Team & Version cards ——————
    const team = makeCard({
      title: 'Team',
      items: ['John S. (You) – Owner', 'Lilianna – Member'],
      pointerText: 'John S.',
      x: -200,
      rotY: 0.25
    });
    const version = makeCard({
      title: 'Version History',
      items: ['v1.0.0 – Initial release', 'v1.1.0 – Lilianna added feature'],
      pointerText: 'Lilianna',
      x: 200,
      rotY: -0.25
    });

    // —————— Entry animation ——————
    gsap.from(team.obj.position, { x: -800, duration: 1.5, ease: 'back.out(1.7)' });
    gsap.from(version.obj.position, { x:  800, duration: 1.5, ease: 'back.out(1.7)' });

    // —————— Interactivity ——————
    const focusTarget = new THREE.Vector3();
    function addInteract(el, obj) {
      el.addEventListener('mouseenter', () =>
        gsap.to(obj.scale, { x:1.05, y:1.05, z:1.05, duration:0.3 }));
      el.addEventListener('mouseleave', () =>
        gsap.to(obj.scale, { x:1, y:1, z:1, duration:0.3 }));
      el.addEventListener('click', () => {
        focusTarget.copy(obj.position);
        gsap.to(camera.position, {
          x: focusTarget.x,
          y: focusTarget.y,
          z: focusTarget.z + 300,
          duration: 1.5,
          ease: 'power2.inOut'
        });
      });
    }
    addInteract(team.el, team.obj);
    addInteract(version.el, version.obj);

    // —————— Render loop ——————
    function animate() {
      requestAnimationFrame(animate);
      camera.lookAt(focusTarget);
      renderer.render(scene, camera);
    }
    animate();

    // —————— Resize ——————
    window.addEventListener('resize', () => {
      camera.aspect = innerWidth/innerHeight;
      camera.updateProjectionMatrix();
      renderer.setSize(innerWidth, innerHeight);
    });
  </script>
</body>
</html>
